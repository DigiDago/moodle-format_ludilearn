/*! format_ludilearn 2025-03-26 */
define(["jquery","core/ajax","core/str","core/notification"],(a,l,s,u)=>{let c,d;return{init:(e,r)=>{c=e,d=r,a("#form-questionnaire").on("submit",e=>{e.preventDefault();var r=new FormData(e.target),t={answers:[]};let i=!1,n=0;for(let e=1;e<=c;e++){var o={};if(o.id=r.get("questionid-"+e),o.score=r.get("question-"+e),null===o.score){i=!0,n=e;break}t.answers.push(o)}if(i){a(".invalid-feedback").html("");let r;s.get_string("missinganswers","format_ludilearn").then(e=>{r=e;e=a("#id_error_"+n);return e.html(r),e.show(),document.querySelector("#id_error_"+n).scrollIntoView({behavior:"smooth"}),null}).fail(u.exception)}else l.call([{methodname:"format_ludilearn_submit_questionnaire",args:t}],!0,!0)[0].done(()=>{window.location.href=d}).fail(u.exception)})}}});