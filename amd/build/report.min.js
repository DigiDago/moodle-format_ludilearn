/*! format_ludilearn 2025-03-26 */
define(["jquery","core/ajax","core/templates","format_ludilearn/pagination","format_ludilearn/loading","core/notification"],(t,d,m,c,f,u)=>{let p,o=(e,n,r,t,o)=>{var a={};a.courseid=p,a.contain=n,a.limit=r,a.offset=t,a.sort=o;let i=document.getElementById("tableReport"),l=i.getElementsByTagName("tbody");0<l.length&&f.load("tbodyReport"),d.call([{methodname:"format_ludilearn_get_report",args:a}],!0,!0)[0].done(o=>{m.render("format_ludilearn/report/table_report",o).then(t=>{if(0<l.length&&l[0].remove(),i.insertAdjacentHTML("beforeend",t),!0===e){let e=Math.ceil(o.countWithoutLimit/r);0===e&&(e=1);t={};t.contain=n,c.load("pagination",e,s,t)}return null}).fail(u.exception)}).fail(u.exception)},s=e=>{o(!1,e.contain,e.limit,e.offset,e.sort)};return{init:e=>{p=e,t("#formSearchReport").on("submit",e=>{e.preventDefault();e=t("#inputSearchReport").val();o(!0,e,10,0,"firstname")}),o(!0,"",10,0,"id")}}});